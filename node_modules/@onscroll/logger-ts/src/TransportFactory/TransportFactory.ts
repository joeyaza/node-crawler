import * as Transports from "./Transports/Transports";
import {Injector, Inject} from "@onscroll/di-ts";
import {AbstractTransport} from "./Transports/AbstractTransport";
import {LogLevel} from "../Logger/Logger";


@Inject
export class TransportFactory {

    constructor(private injector: Injector) {

    }

    public createTransport(type: string, settings, logLevel: LogLevel = LogLevel.DEBUG) {

        const TransportCtor = Transports[type];

        if (TransportCtor) {

            const transport: AbstractTransport = this.injector.get(TransportCtor) as AbstractTransport;
            transport.initialize(settings, logLevel);

            return transport;
        }

        throw new Error("Invalid transport name: " + type);

    }

}
